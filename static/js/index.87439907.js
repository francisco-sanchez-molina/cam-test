(()=>{"use strict";var e={350:function(e,t,r){var a=r(132),n=r(546),o=r(828),l=r(441);let i=()=>{let e=(0,n.useRef)(null),t=(0,n.useRef)(null),r=(0,n.useRef)(null),o=!0,i=["DocumentID"],c=(e,t)=>{let[r,a,n,o]=e,[l,i,c,s]=t;return Math.max(0,Math.min(n,c)-Math.max(r,l))*Math.max(0,Math.min(o,s)-Math.max(a,i))},s=(e,t)=>{let[r,a,n,o]=e,[l,i,s,u]=t;return(n-r)*(o-a)+(s-l)*(u-i)-c(e,t)},u=(e,t)=>c(e,t)/s(e,t),h=(e,t,r)=>{let a=[];for(let n=0;n<8400;n++){let o=0,l=0;for(let t=0;t<80;t++){let r=e[8400*(t+4)+n];r>l&&(l=r,o=t)}if(l<.5)continue;let c=i[o],s=e[n],u=e[8400+n],h=e[16800+n],f=e[25200+n],d=(s-h/2)/640*t,p=(u-f/2)/640*r,v=(s+h/2)/640*t,m=(u+f/2)/640*r;a.push([d,p,v,m,c,l])}a.sort((e,t)=>t[5]-e[5]);let n=[];for(;a.length>0;){let e=a.shift();n.push(e),a=a.filter(t=>.7>u(e,t))}return n},f=async()=>{if(!o)return;let a=e.current,n=t.current,i=n.getContext("2d");n.width=a.videoWidth,n.height=a.videoHeight;let c=document.createElement("canvas");c.width=640,c.height=640;let s=c.getContext("2d");s.drawImage(a,0,0,640,640);let u=s.getImageData(0,0,640,640).data,d=[],p=[],v=[];for(let e=0;e<u.length;e+=4)d.push(u[e]/255),p.push(u[e+1]/255),v.push(u[e+2]/255);let m=Float32Array.from([...d,...p,...v]),g=new l.es("float32",m,[1,3,640,640]);try{let e=(await r.current.run({images:g})).output0.data;h(e,n.width,n.height).forEach(e=>{let[t,r,a,n,o]=e;i.strokeStyle="#00FF00",i.lineWidth=3,i.strokeRect(t,r,a-t,n-r),i.font="18px serif",i.fillStyle="#00FF00";let l=i.measureText(o).width;i.fillRect(t,r,l+10,25),i.fillStyle="#000000",i.fillText(o,t,r+18)})}catch(e){console.error("Error al ejecutar el modelo:",e)}requestAnimationFrame(f)};return(0,n.useEffect)(()=>(l.Bc.create("best.onnx").then(e=>{r.current=e}).catch(e=>console.error("Error al cargar el modelo:",e)),navigator.mediaDevices.getUserMedia({video:!0}).then(t=>{e.current.srcObject=t,e.current.play()}).catch(e=>console.error("Error al acceder a la webcam:",e)),e.current.addEventListener("playing",()=>{f()}),()=>{o=!1,e.current&&e.current.srcObject&&e.current.srcObject.getTracks().forEach(e=>e.stop())}),[]),(0,a.jsxs)("div",{position:"relative",children:[(0,a.jsx)("video",{ref:e,style:{position:"absolute",width:"400px"}}),(0,a.jsx)("canvas",{ref:t,style:{position:"absolute",width:"400px"}})]})};o.createRoot(document.getElementById("root")).render((0,a.jsx)(()=>(0,a.jsx)(i,{}),{}))}},t={};function r(a){var n=t[a];if(void 0!==n)return n.exports;var o=t[a]={exports:{}};return e[a](o,o.exports,r),o.exports}r.m=e,r.d=(e,t)=>{for(var a in t)r.o(t,a)&&!r.o(e,a)&&Object.defineProperty(e,a,{enumerable:!0,get:t[a]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{var e=[];r.O=(t,a,n,o)=>{if(a){o=o||0;for(var l=e.length;l>0&&e[l-1][2]>o;l--)e[l]=e[l-1];e[l]=[a,n,o];return}for(var i=1/0,l=0;l<e.length;l++){for(var[a,n,o]=e[l],c=!0,s=0;s<a.length;s++)(!1&o||i>=o)&&Object.keys(r.O).every(e=>r.O[e](a[s]))?a.splice(s--,1):(c=!1,o<i&&(i=o));if(c){e.splice(l--,1);var u=n();void 0!==u&&(t=u)}}return t}})(),r.p="/",r.rv=()=>"1.3.2",(()=>{r.b=document.baseURI||self.location.href;var e={980:0};r.O.j=t=>0===e[t];var t=(t,a)=>{var n,o,[l,i,c]=a,s=0;if(l.some(t=>0!==e[t])){for(n in i)r.o(i,n)&&(r.m[n]=i[n]);if(c)var u=c(r)}for(t&&t(a);s<l.length;s++)o=l[s],r.o(e,o)&&e[o]&&e[o][0](),e[o]=0;return r.O(u)},a=self.webpackChunkcam=self.webpackChunkcam||[];a.forEach(t.bind(null,0)),a.push=t.bind(null,a.push.bind(a))})(),r.ruid="bundler=rspack@1.3.2";var a=r.O(void 0,["361","33"],function(){return r(350)});a=r.O(a)})();